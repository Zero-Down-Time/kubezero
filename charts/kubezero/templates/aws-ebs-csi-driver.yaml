{{- define "aws-ebs-csi-driver-values" }}
aws-ebs-csi-driver:
  controller:
    replicaCount: {{ ternary 2 1 .Values.HighAvailableControlplane }}
    k8sTagClusterId: {{ .Values.ClusterName }}
    env:
      ebsPlugin:
      - name: AWS_ROLE_ARN
        value: {{ index .Values "aws-ebs-csi-driver" "IamArn" | quote }}
      - name: AWS_WEB_IDENTITY_TOKEN_FILE
        value: "/var/run/secrets/sts.amazonaws.com/serviceaccount/token"
      - name: AWS_STS_REGIONAL_ENDPOINTS
        value: regional
{{- end }}


{{- define "aws-ebs-csi-driver-argo" }}
{{- end }}

{{ include "kubezero-app.app" . }}
