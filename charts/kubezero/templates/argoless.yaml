{{- if and ( not .Values.argocdAppName ) ( not .Values.installKubeZero ) }}
# if no ArgoCD is used, only render the global values.yaml for all kubezero modules

{{- $artifacts := list "calico" "cert-manager" "kiam" "aws-ebs-csi-driver" "aws-efs-csi-driver" "istio" "istio-ingress" "metrics" "logging" "argocd" "timecapsule" "storage" }}

{{- range $artifacts }}
{{- if index $.Values . }}
{{ . }}:
  enabled: {{ index $.Values . "enabled" }}
  namespace: {{ default "kube-system" ( index $.Values . "namespace" ) }}
  crds: {{ default false ( index $.Values . "crds" ) }}
  values:
    {{- include (print . "-values") $ | nindent 4 }}
{{- end }}
{{- end }}
 
{{- end }}
