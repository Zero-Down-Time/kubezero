aws-ebs-csi-driver:
  enableVolumeSnapshot: true

  controller:
    replicaCount: 1
    logLevel: 1

    nodeSelector:
      node-role.kubernetes.io/master: ""
    tolerations:
    - key: node-role.kubernetes.io/master
      effect: NoSchedule

    # k8sTagClusterId: <CLUSTER_NAME>

    #env:
    #  ebsPlugin:
      #- name: AWS_ROLE_ARN
      #  value: "<ebs-csi-driver IAM ROLE ARN>"
      #- name: AWS_WEB_IDENTITY_TOKEN_FILE
      #  value: "/var/run/secrets/sts.amazonaws.com/serviceaccount/token"
      #- name: AWS_STS_REGIONAL_ENDPOINTS
      #  value: regional
    resources:
      requests:
        cpu: 10m
        memory: 24Mi
      limits:
        # cpu: 50m
        memory: 40Mi

  storageClasses:
  - name: ebs-sc-gp2-xfs
    volumeBindingMode: WaitForFirstConsumer
    allowVolumeExpansion: true
    parameters:
      csi.storage.k8s.io/fstype: xfs
      type: gp2
      encrypted: "true"
  - name: ebs-sc-gp3-xfs
    annotations:
      storageclass.kubernetes.io/is-default-class: "true"
    volumeBindingMode: WaitForFirstConsumer
    allowVolumeExpansion: true
    parameters:
      csi.storage.k8s.io/fstype: xfs
      type: gp3
      encrypted: "true"

  # This will probably move to snapshot later on
  nodeSelector:
    node-role.kubernetes.io/master: ""
  tolerations:
  - key: node-role.kubernetes.io/master
    effect: NoSchedule
