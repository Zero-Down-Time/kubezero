apiVersion: kubeadm.k8s.io/v1beta2
kind: JoinConfiguration
discovery:
  file:
    kubeConfigPath: /root/.kube/config
controlPlane:
  localAPIEndpoint:
    advertiseAddress: {{ .Values.serviceIp }}
    bindPort: {{ .Values.api.listenPort }}
nodeRegistration:
  ignorePreflightErrors:
  - DirAvailable--var-lib-etcd
  - FileAvailable--etc-kubernetes-pki-ca.crt
  - Swap
  - KubeletVersion
  kubeletExtraArgs:
    node-labels: {{ .Values.nodeLabels | quote }}
    {{- with .Values.providerID }}
    provider-id: {{ . }}
    {{- end }}
