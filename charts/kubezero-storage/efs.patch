diff -tuNr charts/aws-efs-csi-driver.orig/templates/controller-deployment.yaml charts/aws-efs-csi-driver/templates/controller-deployment.yaml
--- charts/aws-efs-csi-driver.orig/templates/controller-deployment.yaml	2022-04-28 01:41:15.000000000 +0200
+++ charts/aws-efs-csi-driver/templates/controller-deployment.yaml	2022-05-05 17:10:49.708746126 +0200
@@ -13,6 +13,10 @@
       app: efs-csi-controller
       app.kubernetes.io/name: {{ include "aws-efs-csi-driver.name" . }}
       app.kubernetes.io/instance: {{ .Release.Name }}
+  {{- with .Values.controller.updateStrategy }}
+  strategy:
+    type: {{ . }}
+  {{- end }}
   template:
     metadata:
       labels:
@@ -57,9 +61,14 @@
           env:
             - name: CSI_ENDPOINT
               value: unix:///var/lib/csi/sockets/pluginproxy/csi.sock
+          {{- if .Values.controller.extraEnv }}
+            {{- toYaml .Values.controller.extraEnv | nindent 12 }}
+          {{- end }}
           volumeMounts:
             - name: socket-dir
               mountPath: /var/lib/csi/sockets/pluginproxy/
+            - name: aws-token
+              mountPath: "/var/run/secrets/sts.amazonaws.com/serviceaccount/"
           ports:
             - name: healthz
               containerPort: {{ .Values.controller.healthPort }}
@@ -110,6 +119,13 @@
       volumes:
         - name: socket-dir
           emptyDir: {}
+        - name: aws-token
+          projected:
+            sources:
+            - serviceAccountToken:
+                path: token
+                expirationSeconds: 86400
+                audience: "sts.amazonaws.com"
       {{- with .Values.controller.affinity }}
       affinity: {{- toYaml . | nindent 8 }}
       {{- end }}
diff -tuNr charts/aws-efs-csi-driver.orig/templates/node-daemonset.yaml charts/aws-efs-csi-driver/templates/node-daemonset.yaml
--- charts/aws-efs-csi-driver.orig/templates/node-daemonset.yaml	2022-04-28 01:41:15.000000000 +0200
+++ charts/aws-efs-csi-driver/templates/node-daemonset.yaml	2022-05-05 17:09:28.361227665 +0200
@@ -40,15 +40,10 @@
         {{- with .Values.node.nodeSelector }}
         {{- toYaml . | nindent 8 }}
         {{- end }}
+      {{- with .Values.node.affinity }}
       affinity:
-        nodeAffinity:
-          requiredDuringSchedulingIgnoredDuringExecution:
-            nodeSelectorTerms:
-            - matchExpressions:
-              - key: eks.amazonaws.com/compute-type
-                operator: NotIn
-                values:
-                - fargate
+        {{- . | toYaml | nindent 8 }}
+      {{- end }}
       hostNetwork: true
       dnsPolicy: {{ .Values.node.dnsPolicy }}
       {{- with .Values.node.dnsConfig }}
